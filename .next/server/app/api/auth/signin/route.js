"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/signin/route";
exports.ids = ["app/api/auth/signin/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fsignin%2Froute&page=%2Fapi%2Fauth%2Fsignin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsignin%2Froute.ts&appDir=C%3A%5CPliv%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CPliv&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fsignin%2Froute&page=%2Fapi%2Fauth%2Fsignin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsignin%2Froute.ts&appDir=C%3A%5CPliv%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CPliv&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Pliv_app_api_auth_signin_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/signin/route.ts */ \"(rsc)/./app/api/auth/signin/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/signin/route\",\n        pathname: \"/api/auth/signin\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/signin/route\"\n    },\n    resolvedPagePath: \"C:\\\\Pliv\\\\app\\\\api\\\\auth\\\\signin\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Pliv_app_api_auth_signin_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/auth/signin/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGc2lnbmluJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhdXRoJTJGc2lnbmluJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXV0aCUyRnNpZ25pbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUGxpdiU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1BsaXYmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDTjtBQUN2RTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0YXR1cy1wYWdlLWZyZXNoLz8xOTUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFBsaXZcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXHNpZ25pblxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9zaWduaW4vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL3NpZ25pblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXV0aC9zaWduaW4vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxQbGl2XFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxzaWduaW5cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9zaWduaW4vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fsignin%2Froute&page=%2Fapi%2Fauth%2Fsignin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsignin%2Froute.ts&appDir=C%3A%5CPliv%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CPliv&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/signin/route.ts":
/*!**************************************!*\
  !*** ./app/api/auth/signin/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\n\n\n\nconst dynamic = \"force-dynamic\";\nasync function POST(request) {\n    try {\n        // Safety check for request body\n        let body;\n        try {\n            body = await request.json();\n        } catch (jsonError) {\n            console.error(\"[Sign In] Invalid JSON in request body:\", jsonError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid request format\",\n                success: false\n            }, {\n                status: 400\n            });\n        }\n        const { email, password } = body;\n        // Log attempt with partial email for privacy\n        const emailPrefix = email ? email.split(\"@\")[0].substring(0, 3) + \"***\" : \"undefined\";\n        console.log(`[Sign In] Attempt for email: ${emailPrefix}@...`);\n        // Check database connection\n        try {\n            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.$queryRaw`SELECT 1`;\n            console.log(\"[Sign In] Database connection confirmed\");\n        } catch (dbConnError) {\n            console.error(\"[Sign In] Database connection failed:\", dbConnError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Database connection failed\",\n                details: dbConnError.message,\n                success: false\n            }, {\n                status: 500\n            });\n        }\n        // Validate required fields\n        if (!email || !password) {\n            console.log(\"[Sign In] Missing email or password\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Email and password are required\",\n                success: false\n            }, {\n                status: 400\n            });\n        }\n        // Find the user\n        try {\n            const user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n                where: {\n                    email\n                }\n            });\n            // If user doesn't exist\n            if (!user) {\n                console.log(`[Sign In] User not found: ${emailPrefix}@...`);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Invalid email or password\",\n                    success: false\n                }, {\n                    status: 401\n                });\n            }\n            console.log(`[Sign In] User found: ${emailPrefix}@..., verifying password`);\n            // Verify password\n            try {\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_2__.compare(password, user.password);\n                if (!isPasswordValid) {\n                    console.log(`[Sign In] Invalid password for: ${emailPrefix}@...`);\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: \"Invalid email or password\",\n                        success: false\n                    }, {\n                        status: 401\n                    });\n                }\n                console.log(`[Sign In] Password valid for: ${emailPrefix}@..., creating token`);\n                // Create a JWT token with user info\n                try {\n                    const token = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_4__.createToken)({\n                        userId: user.id,\n                        email: user.email\n                    });\n                    console.log(`[Sign In] Token created for: ${emailPrefix}@..., setting cookie`);\n                    // Set auth cookie\n                    (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)().set({\n                        name: \"__clerk_db_jwt\",\n                        value: token,\n                        httpOnly: true,\n                        path: \"/\",\n                        secure: \"development\" === \"production\",\n                        maxAge: 60 * 60 * 24 * 7,\n                        sameSite: \"lax\"\n                    });\n                    // Don't send the password back to the client\n                    const { password: _, ...userWithoutPassword } = user;\n                    console.log(`[Sign In] Success for: ${emailPrefix}@...`);\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        user: userWithoutPassword,\n                        success: true\n                    });\n                } catch (tokenError) {\n                    console.error(`[Sign In] Token creation error for ${emailPrefix}@...`, tokenError);\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: `Token creation failed: ${tokenError.message}`,\n                        success: false\n                    }, {\n                        status: 500\n                    });\n                }\n            } catch (passwordError) {\n                console.error(`[Sign In] Password comparison error for ${emailPrefix}@...`, passwordError);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: `Authentication failed`,\n                    success: false\n                }, {\n                    status: 500\n                });\n            }\n        } catch (userError) {\n            console.error(`[Sign In] Database error for ${emailPrefix}@...`, userError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: `Database operation failed`,\n                success: false\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Error authenticating user:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Authentication failed\",\n            details: error.message,\n            success: false\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVLLFlBQVksSUFBSSxDQUFDLEVBQUU2QjtZQUNqRSxPQUFPOUMsa0ZBQVlBLENBQUNTLElBQUksQ0FBQztnQkFDdkJHLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQztnQkFDbENDLFNBQVM7WUFDWCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbkI7SUFDRixFQUFFLE9BQU9GLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUMsT0FBT1osa0ZBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUcsT0FBTztZQUF5QlcsU0FBUyxNQUFpQkMsT0FBTztZQUFFWCxTQUFTO1FBQU0sR0FDcEY7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdGF0dXMtcGFnZS1mcmVzaC8uL2FwcC9hcGkvYXV0aC9zaWduaW4vcm91dGUudHM/YWZiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL2RiXCI7XHJcbmltcG9ydCAqIGFzIGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcclxuaW1wb3J0IHsgY3JlYXRlVG9rZW4gfSBmcm9tIFwiQC9saWIvYXV0aFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFNhZmV0eSBjaGVjayBmb3IgcmVxdWVzdCBib2R5XHJcbiAgICBsZXQgYm9keTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIH0gY2F0Y2ggKGpzb25FcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiW1NpZ24gSW5dIEludmFsaWQgSlNPTiBpbiByZXF1ZXN0IGJvZHk6XCIsIGpzb25FcnJvcik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICAgIGVycm9yOiBcIkludmFsaWQgcmVxdWVzdCBmb3JtYXRcIiwgXHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UgXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IGJvZHk7XHJcblxyXG4gICAgLy8gTG9nIGF0dGVtcHQgd2l0aCBwYXJ0aWFsIGVtYWlsIGZvciBwcml2YWN5XHJcbiAgICBjb25zdCBlbWFpbFByZWZpeCA9IGVtYWlsID8gZW1haWwuc3BsaXQoJ0AnKVswXS5zdWJzdHJpbmcoMCwgMykgKyBcIioqKlwiIDogXCJ1bmRlZmluZWRcIjtcclxuICAgIGNvbnNvbGUubG9nKGBbU2lnbiBJbl0gQXR0ZW1wdCBmb3IgZW1haWw6ICR7ZW1haWxQcmVmaXh9QC4uLmApO1xyXG5cclxuICAgIC8vIENoZWNrIGRhdGFiYXNlIGNvbm5lY3Rpb25cclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHByaXNtYS4kcXVlcnlSYXdgU0VMRUNUIDFgO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIltTaWduIEluXSBEYXRhYmFzZSBjb25uZWN0aW9uIGNvbmZpcm1lZFwiKTtcclxuICAgIH0gY2F0Y2ggKGRiQ29ubkVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbU2lnbiBJbl0gRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQ6XCIsIGRiQ29ubkVycm9yKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXHJcbiAgICAgICAgZXJyb3I6IFwiRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWRcIiwgXHJcbiAgICAgICAgZGV0YWlsczogKGRiQ29ubkVycm9yIGFzIEVycm9yKS5tZXNzYWdlLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIltTaWduIEluXSBNaXNzaW5nIGVtYWlsIG9yIHBhc3N3b3JkXCIpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogXCJFbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkXCIsIHN1Y2Nlc3M6IGZhbHNlIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmluZCB0aGUgdXNlclxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGVtYWlsIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gSWYgdXNlciBkb2Vzbid0IGV4aXN0XHJcbiAgICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbiBJbl0gVXNlciBub3QgZm91bmQ6ICR7ZW1haWxQcmVmaXh9QC4uLmApO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6IFwiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZFwiLCBzdWNjZXNzOiBmYWxzZSB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coYFtTaWduIEluXSBVc2VyIGZvdW5kOiAke2VtYWlsUHJlZml4fUAuLi4sIHZlcmlmeWluZyBwYXNzd29yZGApO1xyXG5cclxuICAgICAgLy8gVmVyaWZ5IHBhc3N3b3JkXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xyXG4gICAgICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW1NpZ24gSW5dIEludmFsaWQgcGFzc3dvcmQgZm9yOiAke2VtYWlsUHJlZml4fUAuLi5gKTtcclxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgeyBlcnJvcjogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCIsIHN1Y2Nlc3M6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbiBJbl0gUGFzc3dvcmQgdmFsaWQgZm9yOiAke2VtYWlsUHJlZml4fUAuLi4sIGNyZWF0aW5nIHRva2VuYCk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIEpXVCB0b2tlbiB3aXRoIHVzZXIgaW5mb1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB0b2tlbiA9IGNyZWF0ZVRva2VuKHtcclxuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbiBJbl0gVG9rZW4gY3JlYXRlZCBmb3I6ICR7ZW1haWxQcmVmaXh9QC4uLiwgc2V0dGluZyBjb29raWVgKTtcclxuXHJcbiAgICAgICAgICAvLyBTZXQgYXV0aCBjb29raWVcclxuICAgICAgICAgIGNvb2tpZXMoKS5zZXQoe1xyXG4gICAgICAgICAgICBuYW1lOiBcIl9fY2xlcmtfZGJfand0XCIsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0b2tlbixcclxuICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgIHBhdGg6IFwiL1wiLFxyXG4gICAgICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIixcclxuICAgICAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgKiA3LCAvLyAxIHdlZWtcclxuICAgICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCJcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8vIERvbid0IHNlbmQgdGhlIHBhc3N3b3JkIGJhY2sgdG8gdGhlIGNsaWVudFxyXG4gICAgICAgICAgY29uc3QgeyBwYXNzd29yZDogXywgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gdXNlcjtcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW1NpZ24gSW5dIFN1Y2Nlc3MgZm9yOiAke2VtYWlsUHJlZml4fUAuLi5gKTtcclxuXHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICB1c2VyOiB1c2VyV2l0aG91dFBhc3N3b3JkLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoICh0b2tlbkVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbU2lnbiBJbl0gVG9rZW4gY3JlYXRpb24gZXJyb3IgZm9yICR7ZW1haWxQcmVmaXh9QC4uLmAsIHRva2VuRXJyb3IpO1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXHJcbiAgICAgICAgICAgIGVycm9yOiBgVG9rZW4gY3JlYXRpb24gZmFpbGVkOiAkeyh0b2tlbkVycm9yIGFzIEVycm9yKS5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlXHJcbiAgICAgICAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAocGFzc3dvcmRFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtTaWduIEluXSBQYXNzd29yZCBjb21wYXJpc29uIGVycm9yIGZvciAke2VtYWlsUHJlZml4fUAuLi5gLCBwYXNzd29yZEVycm9yKTtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcclxuICAgICAgICAgIGVycm9yOiBgQXV0aGVudGljYXRpb24gZmFpbGVkYCxcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlXHJcbiAgICAgICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAodXNlckVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtTaWduIEluXSBEYXRhYmFzZSBlcnJvciBmb3IgJHtlbWFpbFByZWZpeH1ALi4uYCwgdXNlckVycm9yKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXHJcbiAgICAgICAgZXJyb3I6IGBEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkYCxcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZVxyXG4gICAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYXV0aGVudGljYXRpbmcgdXNlcjpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiLCBkZXRhaWxzOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UsIHN1Y2Nlc3M6IGZhbHNlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsImJjcnlwdCIsImNvb2tpZXMiLCJjcmVhdGVUb2tlbiIsImR5bmFtaWMiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwianNvbkVycm9yIiwiY29uc29sZSIsImVycm9yIiwic3VjY2VzcyIsInN0YXR1cyIsImVtYWlsIiwicGFzc3dvcmQiLCJlbWFpbFByZWZpeCIsInNwbGl0Iiwic3Vic3RyaW5nIiwibG9nIiwiJHF1ZXJ5UmF3IiwiZGJDb25uRXJyb3IiLCJkZXRhaWxzIiwibWVzc2FnZSIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpc1Bhc3N3b3JkVmFsaWQiLCJjb21wYXJlIiwidG9rZW4iLCJ1c2VySWQiLCJpZCIsInNldCIsIm5hbWUiLCJ2YWx1ZSIsImh0dHBPbmx5IiwicGF0aCIsInNlY3VyZSIsInByb2Nlc3MiLCJtYXhBZ2UiLCJzYW1lU2l0ZSIsIl8iLCJ1c2VyV2l0aG91dFBhc3N3b3JkIiwidG9rZW5FcnJvciIsInBhc3N3b3JkRXJyb3IiLCJ1c2VyRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/signin/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createToken: () => (/* binding */ createToken),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\n// Get the appropriate secret key\nfunction getSecretKey() {\n    const key = process.env.CLERK_SECRET_KEY || process.env.JWT_SECRET || \"fallback-secret-key-change-me\";\n    if (key === \"fallback-secret-key-change-me\") {\n        console.warn(\"WARNING: Using fallback secret key. Set CLERK_SECRET_KEY or JWT_SECRET environment variable.\");\n    }\n    return key;\n}\n// Create a JWT token\nfunction createToken(payload) {\n    const secretKey = getSecretKey();\n    try {\n        console.log(`Creating token for user: ${payload.userId}`);\n        const token = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.sign)(payload, secretKey, {\n            expiresIn: \"7d\"\n        });\n        // Verify that the token is valid right after creation (sanity check)\n        try {\n            const decoded = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.verify)(token, secretKey);\n            console.log(`Token created and verified successfully for user: ${payload.userId}`);\n            return token;\n        } catch (verifyError) {\n            console.error(\"Token verification after creation failed:\", verifyError);\n            throw verifyError;\n        }\n    } catch (error) {\n        console.error(\"Token creation failed:\", error);\n        throw error;\n    }\n}\n// Verify a JWT token\nfunction verifyToken(token) {\n    try {\n        console.log(\"Verifying token...\");\n        const secretKey = getSecretKey();\n        const decoded = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.verify)(token, secretKey);\n        console.log(`Token verified successfully for user: ${decoded.userId}`);\n        return decoded;\n    } catch (error) {\n        console.error(\"Error verifying token:\", error);\n        return null;\n    }\n}\n// Get current user from token\nasync function getCurrentUser(token) {\n    const payload = verifyToken(token);\n    if (!payload) return null;\n    // If needed, you can fetch more user data from the database here\n    return {\n        id: payload.userId,\n        email: payload.email\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3RDtBQVF4RCxpQ0FBaUM7QUFDakMsU0FBU0U7SUFDUCxNQUFNQyxNQUFNQyxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQixJQUFJRixRQUFRQyxHQUFHLENBQUNFLFVBQVUsSUFBSTtJQUV0RSxJQUFJSixRQUFRLGlDQUFpQztRQUMzQ0ssUUFBUUMsSUFBSSxDQUFDO0lBQ2Y7SUFFQSxPQUFPTjtBQUNUO0FBRUEscUJBQXFCO0FBQ2QsU0FBU08sWUFBWUMsT0FBNEM7SUFDdEUsTUFBTUMsWUFBWVY7SUFFbEIsSUFBSTtRQUNGTSxRQUFRSyxHQUFHLENBQUMsQ0FBQyx5QkFBeUIsRUFBRUYsUUFBUUcsTUFBTSxDQUFDLENBQUM7UUFDeEQsTUFBTUMsUUFBUWQsa0RBQUlBLENBQ2hCVSxTQUNBQyxXQUNBO1lBQUVJLFdBQVc7UUFBSztRQUdwQixxRUFBcUU7UUFDckUsSUFBSTtZQUNGLE1BQU1DLFVBQVVqQixvREFBTUEsQ0FBQ2UsT0FBT0g7WUFDOUJKLFFBQVFLLEdBQUcsQ0FBQyxDQUFDLGtEQUFrRCxFQUFFRixRQUFRRyxNQUFNLENBQUMsQ0FBQztZQUNqRixPQUFPQztRQUNULEVBQUUsT0FBT0csYUFBYTtZQUNwQlYsUUFBUVcsS0FBSyxDQUFDLDZDQUE2Q0Q7WUFDM0QsTUFBTUE7UUFDUjtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkWCxRQUFRVyxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSxxQkFBcUI7QUFDZCxTQUFTQyxZQUFZTCxLQUFhO0lBQ3ZDLElBQUk7UUFDRlAsUUFBUUssR0FBRyxDQUFDO1FBQ1osTUFBTUQsWUFBWVY7UUFDbEIsTUFBTWUsVUFBVWpCLG9EQUFNQSxDQUNwQmUsT0FDQUg7UUFHRkosUUFBUUssR0FBRyxDQUFDLENBQUMsc0NBQXNDLEVBQUVJLFFBQVFILE1BQU0sQ0FBQyxDQUFDO1FBQ3JFLE9BQU9HO0lBQ1QsRUFBRSxPQUFPRSxPQUFPO1FBQ2RYLFFBQVFXLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRUEsOEJBQThCO0FBQ3ZCLGVBQWVFLGVBQWVOLEtBQWE7SUFDaEQsTUFBTUosVUFBVVMsWUFBWUw7SUFDNUIsSUFBSSxDQUFDSixTQUFTLE9BQU87SUFFckIsaUVBQWlFO0lBQ2pFLE9BQU87UUFDTFcsSUFBSVgsUUFBUUcsTUFBTTtRQUNsQlMsT0FBT1osUUFBUVksS0FBSztJQUN0QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RhdHVzLXBhZ2UtZnJlc2gvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlcmlmeSwgc2lnbiwgSnd0UGF5bG9hZCB9IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcblxyXG4vLyBJbnRlcmZhY2UgZm9yIEpXVCBwYXlsb2FkXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlckp3dFBheWxvYWQgZXh0ZW5kcyBKd3RQYXlsb2FkIHtcclxuICB1c2VySWQ6IHN0cmluZztcclxuICBlbWFpbDogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBHZXQgdGhlIGFwcHJvcHJpYXRlIHNlY3JldCBrZXlcclxuZnVuY3Rpb24gZ2V0U2VjcmV0S2V5KCk6IHN0cmluZyB7XHJcbiAgY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuQ0xFUktfU0VDUkVUX0tFWSB8fCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICdmYWxsYmFjay1zZWNyZXQta2V5LWNoYW5nZS1tZSc7XHJcbiAgXHJcbiAgaWYgKGtleSA9PT0gJ2ZhbGxiYWNrLXNlY3JldC1rZXktY2hhbmdlLW1lJykge1xyXG4gICAgY29uc29sZS53YXJuKCdXQVJOSU5HOiBVc2luZyBmYWxsYmFjayBzZWNyZXQga2V5LiBTZXQgQ0xFUktfU0VDUkVUX0tFWSBvciBKV1RfU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlLicpO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4ga2V5O1xyXG59XHJcblxyXG4vLyBDcmVhdGUgYSBKV1QgdG9rZW5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRva2VuKHBheWxvYWQ6IE9taXQ8VXNlckp3dFBheWxvYWQsICdpYXQnIHwgJ2V4cCc+KTogc3RyaW5nIHtcclxuICBjb25zdCBzZWNyZXRLZXkgPSBnZXRTZWNyZXRLZXkoKTtcclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coYENyZWF0aW5nIHRva2VuIGZvciB1c2VyOiAke3BheWxvYWQudXNlcklkfWApO1xyXG4gICAgY29uc3QgdG9rZW4gPSBzaWduKFxyXG4gICAgICBwYXlsb2FkLFxyXG4gICAgICBzZWNyZXRLZXksXHJcbiAgICAgIHsgZXhwaXJlc0luOiAnN2QnIH1cclxuICAgICk7XHJcbiAgICBcclxuICAgIC8vIFZlcmlmeSB0aGF0IHRoZSB0b2tlbiBpcyB2YWxpZCByaWdodCBhZnRlciBjcmVhdGlvbiAoc2FuaXR5IGNoZWNrKVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGVjb2RlZCA9IHZlcmlmeSh0b2tlbiwgc2VjcmV0S2V5KSBhcyBVc2VySnd0UGF5bG9hZDtcclxuICAgICAgY29uc29sZS5sb2coYFRva2VuIGNyZWF0ZWQgYW5kIHZlcmlmaWVkIHN1Y2Nlc3NmdWxseSBmb3IgdXNlcjogJHtwYXlsb2FkLnVzZXJJZH1gKTtcclxuICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgfSBjYXRjaCAodmVyaWZ5RXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gdmVyaWZpY2F0aW9uIGFmdGVyIGNyZWF0aW9uIGZhaWxlZDonLCB2ZXJpZnlFcnJvcik7XHJcbiAgICAgIHRocm93IHZlcmlmeUVycm9yO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdUb2tlbiBjcmVhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBWZXJpZnkgYSBKV1QgdG9rZW5cclxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVRva2VuKHRva2VuOiBzdHJpbmcpOiBVc2VySnd0UGF5bG9hZCB8IG51bGwge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnVmVyaWZ5aW5nIHRva2VuLi4uJyk7XHJcbiAgICBjb25zdCBzZWNyZXRLZXkgPSBnZXRTZWNyZXRLZXkoKTtcclxuICAgIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnkoXHJcbiAgICAgIHRva2VuLCBcclxuICAgICAgc2VjcmV0S2V5XHJcbiAgICApIGFzIFVzZXJKd3RQYXlsb2FkO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhgVG9rZW4gdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5IGZvciB1c2VyOiAke2RlY29kZWQudXNlcklkfWApO1xyXG4gICAgcmV0dXJuIGRlY29kZWQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyB0b2tlbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vIEdldCBjdXJyZW50IHVzZXIgZnJvbSB0b2tlblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIodG9rZW46IHN0cmluZykge1xyXG4gIGNvbnN0IHBheWxvYWQgPSB2ZXJpZnlUb2tlbih0b2tlbik7XHJcbiAgaWYgKCFwYXlsb2FkKSByZXR1cm4gbnVsbDtcclxuICBcclxuICAvLyBJZiBuZWVkZWQsIHlvdSBjYW4gZmV0Y2ggbW9yZSB1c2VyIGRhdGEgZnJvbSB0aGUgZGF0YWJhc2UgaGVyZVxyXG4gIHJldHVybiB7XHJcbiAgICBpZDogcGF5bG9hZC51c2VySWQsXHJcbiAgICBlbWFpbDogcGF5bG9hZC5lbWFpbFxyXG4gIH07XHJcbn0gIl0sIm5hbWVzIjpbInZlcmlmeSIsInNpZ24iLCJnZXRTZWNyZXRLZXkiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiQ0xFUktfU0VDUkVUX0tFWSIsIkpXVF9TRUNSRVQiLCJjb25zb2xlIiwid2FybiIsImNyZWF0ZVRva2VuIiwicGF5bG9hZCIsInNlY3JldEtleSIsImxvZyIsInVzZXJJZCIsInRva2VuIiwiZXhwaXJlc0luIiwiZGVjb2RlZCIsInZlcmlmeUVycm9yIiwiZXJyb3IiLCJ2ZXJpZnlUb2tlbiIsImdldEN1cnJlbnRVc2VyIiwiaWQiLCJlbWFpbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkDatabaseConnection: () => (/* binding */ checkDatabaseConnection),\n/* harmony export */   prisma: () => (/* binding */ prisma),\n/* harmony export */   withDatabase: () => (/* binding */ withDatabase)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// Check for .vercel-build marker file which indicates we're in a Vercel build\nconst isVercelBuild = (()=>{\n    try {\n        // During build time, we've created a marker file\n        if (typeof process !== \"undefined\" && process.env.VERCEL === \"1\") {\n            return true;\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n})();\n// Determine if we are in a static generation context (during build time)\nconst isStaticGeneration = process.env.NEXT_PHASE === \"phase-production-build\" || process.env.VERCEL && process.env.NEXT_PUBLIC_VERCEL_ENV === \"production\" ||  false && (0);\n// Create a mock client or real client based on environment\nconst createPrismaClient = ()=>{\n    if (isStaticGeneration) {\n        console.log(\"Static generation detected, using mock database client\");\n        // Return a mock Prisma client for static generation\n        return new Proxy({}, {\n            get: (target, prop)=>{\n                if (prop === \"$connect\" || prop === \"$disconnect\") {\n                    return async ()=>{};\n                }\n                // Create a deeper proxy for method chains\n                return ()=>{\n                    // Return a chainable proxy that resolves to empty results\n                    return new Proxy({}, {\n                        get: ()=>()=>Promise.resolve([]),\n                        apply: ()=>Promise.resolve([])\n                    });\n                };\n            }\n        });\n    }\n    // Use a real Prisma client for runtime\n    return new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n        log:  true ? [\n            \"query\",\n            \"error\",\n            \"warn\"\n        ] : 0\n    });\n};\nconst prisma = global.prisma || createPrismaClient();\nif (true) global.prisma = prisma;\n// Helper function to check database connection\nasync function checkDatabaseConnection() {\n    try {\n        if (isStaticGeneration) {\n            console.log(\"Static generation detected, skipping database connection check\");\n            return true;\n        }\n        await prisma.$connect();\n        return true;\n    } catch (error) {\n        console.error(\"Database connection error:\", error);\n        return false;\n    }\n}\n// Helper to gracefully handle database operations in API routes\nasync function withDatabase(operation, fallback) {\n    try {\n        // If we're in a static generation context, return fallback\n        if (isStaticGeneration) {\n            console.log(\"Static generation detected, returning fallback data\");\n            return fallback;\n        }\n        // If we're in a runtime context, try the operation\n        return await operation();\n    } catch (error) {\n        console.error(\"Database operation failed:\", error);\n        return fallback;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEM7QUFNOUMsOEVBQThFO0FBQzlFLE1BQU1DLGdCQUFnQixDQUFDO0lBQ3JCLElBQUk7UUFDRixpREFBaUQ7UUFDakQsSUFBSSxPQUFPQyxZQUFZLGVBQWVBLFFBQVFDLEdBQUcsQ0FBQ0MsTUFBTSxLQUFLLEtBQUs7WUFDaEUsT0FBTztRQUNUO1FBQ0EsT0FBTztJQUNULEVBQUUsT0FBT0MsR0FBRztRQUNWLE9BQU87SUFDVDtBQUNGO0FBRUEseUVBQXlFO0FBQ3pFLE1BQU1DLHFCQUNKSixRQUFRQyxHQUFHLENBQUNJLFVBQVUsS0FBSyw0QkFDMUJMLFFBQVFDLEdBQUcsQ0FBQ0MsTUFBTSxJQUFJRixRQUFRQyxHQUFHLENBQUNLLHNCQUFzQixLQUFLLGdCQUM5RE4sTUFBeUIsSUFBaUJBLENBQUFBLENBQXNDO0FBRWxGLDJEQUEyRDtBQUMzRCxNQUFNUSxxQkFBcUI7SUFDekIsSUFBSUosb0JBQW9CO1FBQ3RCSyxRQUFRQyxHQUFHLENBQUM7UUFFWixvREFBb0Q7UUFDcEQsT0FBTyxJQUFJQyxNQUFNLENBQUMsR0FBbUI7WUFDbkNDLEtBQUssQ0FBQ0MsUUFBUUM7Z0JBQ1osSUFBSUEsU0FBUyxjQUFjQSxTQUFTLGVBQWU7b0JBQ2pELE9BQU8sV0FBYztnQkFDdkI7Z0JBRUEsMENBQTBDO2dCQUMxQyxPQUFPO29CQUNMLDBEQUEwRDtvQkFDMUQsT0FBTyxJQUFJSCxNQUFNLENBQUMsR0FBVTt3QkFDMUJDLEtBQUssSUFBTSxJQUFNRyxRQUFRQyxPQUFPLENBQUMsRUFBRTt3QkFDbkNDLE9BQU8sSUFBTUYsUUFBUUMsT0FBTyxDQUFDLEVBQUU7b0JBQ2pDO2dCQUNGO1lBQ0Y7UUFDRjtJQUNGO0lBRUEsdUNBQXVDO0lBQ3ZDLE9BQU8sSUFBSWxCLHdEQUFZQSxDQUFDO1FBQ3RCWSxLQUFLVixLQUF5QixHQUFnQjtZQUFDO1lBQVM7WUFBUztTQUFPLEdBQUcsQ0FBUztJQUN0RjtBQUNGO0FBRU8sTUFBTWtCLFNBQVNDLE9BQU9ELE1BQU0sSUFBSVYscUJBQXFCO0FBRTVELElBQUlSLElBQXlCLEVBQWNtQixPQUFPRCxNQUFNLEdBQUdBO0FBRTNELCtDQUErQztBQUN4QyxlQUFlRTtJQUNwQixJQUFJO1FBQ0YsSUFBSWhCLG9CQUFvQjtZQUN0QkssUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBTztRQUNUO1FBRUEsTUFBTVEsT0FBT0csUUFBUTtRQUNyQixPQUFPO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RiLFFBQVFhLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87SUFDVDtBQUNGO0FBRUEsZ0VBQWdFO0FBQ3pELGVBQWVDLGFBQWdCQyxTQUEyQixFQUFFQyxRQUFXO0lBQzVFLElBQUk7UUFDRiwyREFBMkQ7UUFDM0QsSUFBSXJCLG9CQUFvQjtZQUN0QkssUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT2U7UUFDVDtRQUVBLG1EQUFtRDtRQUNuRCxPQUFPLE1BQU1EO0lBQ2YsRUFBRSxPQUFPRixPQUFPO1FBQ2RiLFFBQVFhLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU9HO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0YXR1cy1wYWdlLWZyZXNoLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIHZhciBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuLy8gQ2hlY2sgZm9yIC52ZXJjZWwtYnVpbGQgbWFya2VyIGZpbGUgd2hpY2ggaW5kaWNhdGVzIHdlJ3JlIGluIGEgVmVyY2VsIGJ1aWxkXHJcbmNvbnN0IGlzVmVyY2VsQnVpbGQgPSAoKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBEdXJpbmcgYnVpbGQgdGltZSwgd2UndmUgY3JlYXRlZCBhIG1hcmtlciBmaWxlXHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52LlZFUkNFTCA9PT0gJzEnKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn0pKCk7XHJcblxyXG4vLyBEZXRlcm1pbmUgaWYgd2UgYXJlIGluIGEgc3RhdGljIGdlbmVyYXRpb24gY29udGV4dCAoZHVyaW5nIGJ1aWxkIHRpbWUpXHJcbmNvbnN0IGlzU3RhdGljR2VuZXJhdGlvbiA9IFxyXG4gIHByb2Nlc3MuZW52Lk5FWFRfUEhBU0UgPT09ICdwaGFzZS1wcm9kdWN0aW9uLWJ1aWxkJyB8fCBcclxuICAocHJvY2Vzcy5lbnYuVkVSQ0VMICYmIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1ZFUkNFTF9FTlYgPT09ICdwcm9kdWN0aW9uJykgfHxcclxuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nICYmIChwcm9jZXNzLmVudi5WRVJDRUxfRU5WIHx8IGlzVmVyY2VsQnVpbGQpO1xyXG5cclxuLy8gQ3JlYXRlIGEgbW9jayBjbGllbnQgb3IgcmVhbCBjbGllbnQgYmFzZWQgb24gZW52aXJvbm1lbnRcclxuY29uc3QgY3JlYXRlUHJpc21hQ2xpZW50ID0gKCkgPT4ge1xyXG4gIGlmIChpc1N0YXRpY0dlbmVyYXRpb24pIHtcclxuICAgIGNvbnNvbGUubG9nKCdTdGF0aWMgZ2VuZXJhdGlvbiBkZXRlY3RlZCwgdXNpbmcgbW9jayBkYXRhYmFzZSBjbGllbnQnKTtcclxuICAgIFxyXG4gICAgLy8gUmV0dXJuIGEgbW9jayBQcmlzbWEgY2xpZW50IGZvciBzdGF0aWMgZ2VuZXJhdGlvblxyXG4gICAgcmV0dXJuIG5ldyBQcm94eSh7fSBhcyBQcmlzbWFDbGllbnQsIHtcclxuICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wKSA9PiB7XHJcbiAgICAgICAgaWYgKHByb3AgPT09ICckY29ubmVjdCcgfHwgcHJvcCA9PT0gJyRkaXNjb25uZWN0Jykge1xyXG4gICAgICAgICAgcmV0dXJuIGFzeW5jICgpID0+IHsgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVlcGVyIHByb3h5IGZvciBtZXRob2QgY2hhaW5zXHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgIC8vIFJldHVybiBhIGNoYWluYWJsZSBwcm94eSB0aGF0IHJlc29sdmVzIHRvIGVtcHR5IHJlc3VsdHNcclxuICAgICAgICAgIHJldHVybiBuZXcgUHJveHkoe30gYXMgYW55LCB7XHJcbiAgICAgICAgICAgIGdldDogKCkgPT4gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSxcclxuICAgICAgICAgICAgYXBwbHk6ICgpID0+IFByb21pc2UucmVzb2x2ZShbXSlcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAvLyBVc2UgYSByZWFsIFByaXNtYSBjbGllbnQgZm9yIHJ1bnRpbWVcclxuICByZXR1cm4gbmV3IFByaXNtYUNsaWVudCh7XHJcbiAgICBsb2c6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gWydxdWVyeScsICdlcnJvcicsICd3YXJuJ10gOiBbJ2Vycm9yJ10sXHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsLnByaXNtYSB8fCBjcmVhdGVQcmlzbWFDbGllbnQoKTtcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWwucHJpc21hID0gcHJpc21hO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGRhdGFiYXNlIGNvbm5lY3Rpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRGF0YWJhc2VDb25uZWN0aW9uKCkge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoaXNTdGF0aWNHZW5lcmF0aW9uKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTdGF0aWMgZ2VuZXJhdGlvbiBkZXRlY3RlZCwgc2tpcHBpbmcgZGF0YWJhc2UgY29ubmVjdGlvbiBjaGVjaycpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXdhaXQgcHJpc21hLiRjb25uZWN0KCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBIZWxwZXIgdG8gZ3JhY2VmdWxseSBoYW5kbGUgZGF0YWJhc2Ugb3BlcmF0aW9ucyBpbiBBUEkgcm91dGVzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoRGF0YWJhc2U8VD4ob3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+LCBmYWxsYmFjazogVCk6IFByb21pc2U8VD4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBJZiB3ZSdyZSBpbiBhIHN0YXRpYyBnZW5lcmF0aW9uIGNvbnRleHQsIHJldHVybiBmYWxsYmFja1xyXG4gICAgaWYgKGlzU3RhdGljR2VuZXJhdGlvbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnU3RhdGljIGdlbmVyYXRpb24gZGV0ZWN0ZWQsIHJldHVybmluZyBmYWxsYmFjayBkYXRhJyk7XHJcbiAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gSWYgd2UncmUgaW4gYSBydW50aW1lIGNvbnRleHQsIHRyeSB0aGUgb3BlcmF0aW9uXHJcbiAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uKCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIG9wZXJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbGxiYWNrO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiaXNWZXJjZWxCdWlsZCIsInByb2Nlc3MiLCJlbnYiLCJWRVJDRUwiLCJlIiwiaXNTdGF0aWNHZW5lcmF0aW9uIiwiTkVYVF9QSEFTRSIsIk5FWFRfUFVCTElDX1ZFUkNFTF9FTlYiLCJWRVJDRUxfRU5WIiwiY3JlYXRlUHJpc21hQ2xpZW50IiwiY29uc29sZSIsImxvZyIsIlByb3h5IiwiZ2V0IiwidGFyZ2V0IiwicHJvcCIsIlByb21pc2UiLCJyZXNvbHZlIiwiYXBwbHkiLCJwcmlzbWEiLCJnbG9iYWwiLCJjaGVja0RhdGFiYXNlQ29ubmVjdGlvbiIsIiRjb25uZWN0IiwiZXJyb3IiLCJ3aXRoRGF0YWJhc2UiLCJvcGVyYXRpb24iLCJmYWxsYmFjayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/ms","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/bcryptjs","vendor-chunks/safe-buffer","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fsignin%2Froute&page=%2Fapi%2Fauth%2Fsignin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsignin%2Froute.ts&appDir=C%3A%5CPliv%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CPliv&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();